const slider=document.querySelector(".slider"),trail=document.querySelector(".trail").querySelectorAll("div");let value=0,trailValue=0,interval=4e3;const slide=e=>{clearInterval(start),"increase"===e?initiateINC():initiateDEC(),move(value,trailValue),animate(),start=setInterval(()=>slide("increase"),interval)},initiateINC=()=>{trail.forEach(e=>e.classList.remove("active")),80===value?value=0:value+=20,trailUpdate()},initiateDEC=()=>{trail.forEach(e=>e.classList.remove("active")),0===value?value=80:value-=20,trailUpdate()},move=(e,t)=>{slider.style.transform=`translateX(-${e}%)`,trail[t].classList.add("active")},tl=gsap.timeline({defaults:{duration:.6,ease:"power2.inOut"}});tl.from(".bg",{x:"-100%",opacity:0}).from("p",{opacity:0},"-=0.3").from("h1",{opacity:0,y:"30px"},"-=0.3").from("button",{opacity:0,y:"-40px"},"-=0.8");const animate=()=>tl.restart(),trailUpdate=()=>{trailValue=0===value?0:20===value?1:40===value?2:60===value?3:4};let start=setInterval(()=>slide("increase"),interval);document.querySelectorAll("svg").forEach(e=>{e.addEventListener("click",()=>e.classList.contains("next")?slide("increase"):slide("decrease"))});const clickCheck=e=>{clearInterval(start),trail.forEach(e=>e.classList.remove("active"));const t=e.target;t.classList.add("active"),value=t.classList.contains("box1")?0:t.classList.contains("box2")?20:t.classList.contains("box3")?40:t.classList.contains("box4")?60:80,trailUpdate(),move(value,trailValue),animate(),start=setInterval(()=>slide("increase"),interval)};trail.forEach(e=>e.addEventListener("click",e=>clickCheck(e)));const touchSlide=(()=>{let e,t,a,i;slider.addEventListener("touchstart",t=>{e=t.touches[0].clientX,i=slider.clientWidth/trail.length}),slider.addEventListener("touchmove",i=>{i.preventDefault(),t=i.touches[0].clientX,a=e-t});slider.addEventListener("touchend",l=>{a>i/4&&slide("increase"),-1*a>i/4&&slide("decrease"),[e,t,a,i]=[0,0,0,0]})})();